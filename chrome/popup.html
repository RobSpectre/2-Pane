<!--
eader Repaired - Popup Page

Turn the top navigation on and off.

-->
<style type="text/css">
.setting {
    width: 125px;
    height: 25px;
    margin: 5px;
    padding: 5px;
    display: block;
}
</style>

<script type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
function showPopup() {
    function Button() {
        button = document.createElement('a');
        button.setAttribute('href', '#');
        button.setAttribute('class', 'setting');
        return button;
    }

    if (localStorage["hidden"] == true) {
       var button_text = "Show";
    } else {
       var button_text = "Hide";
    }

    var button = Button();
    button.appendChild(document.createTextNode(button_text));
    document.body.appendChild(button);

    $('.setting').click(function(e) {
        var text = $(this).text();
        if (text == "Show") {
            var action = "showNavigation";
            localStorage["hidden"] = false;
            $(this).text("Hide");
        } else {
            var action = "hideNavigation";
            localStorage["hidden"] = true;
            $(this).text("Show");
        }
        chrome.tabs.getSelected(null, function(tab) {
            console.log("Sending message to: " + tab.id);
            chrome.tabs.sendRequest(tab.id, {method: action}, function(response) {
                console.log("Response received: " + response.response);
            });
        });
    });
}

document.addEventListener('DOMContentLoaded', showPopup);
</script>
