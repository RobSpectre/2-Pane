<!---
Reader Repaired - Background Page

Background page for storing and retrieving extension settings.
-->

<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function onRequest(request, sender, sendResponse) {
                if (sender.tab.id) {
                    chrome.pageAction.show(sender.tab.id);
                }
                if (request.method == "loadOptions") {
                    console.log("Retrieving hidden setting...");
                    console.log(localStorage.hidden);
                    sendResponse({hidden: localStorage.hidden});    
                } else if (request.method == "saveOptions") {
                    console.log("Storing hidden setting...");
                    console.log(request.options);
                    localStorage["hidden"] = request.hidden;
                }
            }
            
            chrome.extension.onRequest.addListener(onRequest);
        </script>
    </head>
</html>
